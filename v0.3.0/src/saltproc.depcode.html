<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>saltproc.depcode module &mdash; Saltproc  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Saltproc
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">SaltProc API</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/arfc/saltproc/blob/master/CITATION.md">How to cite</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Saltproc</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>saltproc.depcode module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/src/saltproc.depcode.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-saltproc.depcode">
<span id="saltproc-depcode-module"></span><h1>saltproc.depcode module<a class="headerlink" href="#module-saltproc.depcode" title="Permalink to this headline">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="saltproc.depcode.Depcode">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">saltproc.depcode.</span></span><span class="sig-name descname"><span class="pre">Depcode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">codename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exec_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iter_matfile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geo_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">active_cycles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inactive_cycles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/saltproc/depcode.html#Depcode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#saltproc.depcode.Depcode" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">abc.ABC</span></code></p>
<p>Abstract class for interfacing with monte-carlo particle transport
codes. Contains information about input, output, geometry, and template
files for running depletion simulations. Also contains neutron
population, active, and inactive cycles. Contains methods to read template
and output files, and write new input files for the depletion code.</p>
<dl class="py method">
<dt class="sig sig-object py" id="saltproc.depcode.Depcode.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">codename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exec_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iter_matfile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geo_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">active_cycles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inactive_cycles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/saltproc/depcode.html#Depcode.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#saltproc.depcode.Depcode.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes the Depcode object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>codename</strong> (<em>str</em>) – Name of depletion code.</p></li>
<li><p><strong>exec_path</strong> (<em>str</em>) – Path to depletion code executable.</p></li>
<li><p><strong>template_path</strong> (<em>str</em>) – Path to user input file for depletion code.</p></li>
<li><p><strong>input_path</strong> (<em>str</em>) – Name of input file for depletion code rerunning.</p></li>
<li><p><strong>iter_matfile</strong> (<em>str</em>) – Name of iterative, rewritable material file for depletion code
rerunning. This file is modified during  the simulation.</p></li>
<li><p><strong>geo_file</strong> (<em>str</em><em> or </em><em>list</em><em>, </em><em>optional</em>) – Path to file that contains the reactor geometry.
List of <cite>str</cite> if reactivity control by
switching geometry is <cite>On</cite> or just <cite>str</cite> otherwise.</p></li>
<li><p><strong>npop</strong> (<em>int</em><em>, </em><em>optional</em>) – Size of neutron population per cycle for Monte Carlo.</p></li>
<li><p><strong>active_cycles</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of active cycles.</p></li>
<li><p><strong>inactive_cycles</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of inactive cycles.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="saltproc.depcode.Depcode.read_dep_comp">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">read_dep_comp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dep_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">read_at_end</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/saltproc/depcode.html#Depcode.read_dep_comp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#saltproc.depcode.Depcode.read_dep_comp" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the depleted material data from the depcode simulation
and returns a dictionary with a <cite>Materialflow</cite> object for each
burnable material.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dep_file</strong> (<em>str</em>) – Path to file containing results of depletion simulation</p></li>
<li><p><strong>read_at_end</strong> (<em>bool</em><em>, </em><em>optional</em>) – Controls at which moment in the depletion step to read the data.
If <cite>True</cite>, the function reads data at the end of the
depletion step. Otherwise, the function reads data at the
beginning of the depletion step.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p><strong>mats</strong> – Dictionary that contains <cite>Materialflow</cite> objects.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">key</span></code></dt><dd><p>Name of burnable material.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">value</span></code></dt><dd><p><cite>Materialflow</cite> object holding composition and properties.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict of str to Materialflow</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="saltproc.depcode.Depcode.run_depcode">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">run_depcode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cores</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/saltproc/depcode.html#Depcode.run_depcode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#saltproc.depcode.Depcode.run_depcode" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs depletion code as a subprocess with the given parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cores</strong> (<em>int</em>) – Number of cores to use for depletion code run.</p></li>
<li><p><strong>nodes</strong> (<em>int</em>) – Number of nodes to use for depletion code run.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="saltproc.depcode.Depcode.write_depcode_input">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">write_depcode_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">temp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reactor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dep_step</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">restart</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/saltproc/depcode.html#Depcode.write_depcode_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#saltproc.depcode.Depcode.write_depcode_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes prepared data into depletion code input file(s).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>temp</strong> (<em>str</em>) – Path to depletion code template file</p></li>
<li><p><strong>inp</strong> (<em>str</em>) – Path to input file for depletion code rerunning</p></li>
<li><p><strong>reactor</strong> (<a class="reference internal" href="saltproc.reactor.html#saltproc.reactor.Reactor" title="saltproc.reactor.Reactor"><em>Reactor</em></a>) – Contains information about power load curve and cumulative
depletion time for the integration test.</p></li>
<li><p><strong>dep_step</strong> (<em>int</em>) – Current depletion time step.</p></li>
<li><p><strong>restart</strong> (<em>bool</em>) – Is the current simulation restarted?</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="saltproc.depcode.Depcode.write_mat_file">
<em class="property"><span class="pre">abstract</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">write_mat_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dep_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mat_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dep_end_time</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/saltproc/depcode.html#Depcode.write_mat_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#saltproc.depcode.Depcode.write_mat_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes the iteration input file containing the burnable materials
composition used in depletion runs and updated after each depletion
step.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dep_dict</strong> (<em>dict of str to Materialflow</em>) – <p>Dictionary that contains <cite>Materialflow</cite> objects.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">key</span></code></dt><dd><p>Name of burnable material.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">value</span></code></dt><dd><p><cite>Materialflow</cite> object holding composition and properties.</p>
</dd>
</dl>
</p></li>
<li><p><strong>mat_file</strong> (<em>str</em>) – Path to file containing burnable materials composition.</p></li>
<li><p><strong>dep_end_time</strong> (<em>float</em>) – Current time at the end of the depletion step (d).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="saltproc.depcode.DepcodeSerpent">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">saltproc.depcode.</span></span><span class="sig-name descname"><span class="pre">DepcodeSerpent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exec_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'sss2'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'reactor.serpent'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'data/saltproc_reactor'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iter_matfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'data/saltproc_mat'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geo_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">active_cycles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inactive_cycles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/saltproc/depcode.html#DepcodeSerpent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#saltproc.depcode.DepcodeSerpent" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#saltproc.depcode.Depcode" title="saltproc.depcode.Depcode"><code class="xref py py-class docutils literal notranslate"><span class="pre">saltproc.depcode.Depcode</span></code></a></p>
<p>Class contains information about input, output, geometry, and
template files for running Serpent2 depletion simulations.
Also contains neutrons population, active, and inactive cycles.
Contains methods to read template and output files,
write new input files for Serpent2.</p>
<dl class="py method">
<dt class="sig sig-object py" id="saltproc.depcode.DepcodeSerpent.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exec_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'sss2'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">template_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'reactor.serpent'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'data/saltproc_reactor'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iter_matfile</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'data/saltproc_mat'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">geo_file</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">npop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">50</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">active_cycles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inactive_cycles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">20</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/saltproc/depcode.html#DepcodeSerpent.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#saltproc.depcode.DepcodeSerpent.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes the DepcodeSerpent object.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>exec_path</strong> (<em>str</em>) – Path to Serpent2 executable.</p></li>
<li><p><strong>template_path</strong> (<em>str</em>) – Path to user input file for Serpent2.</p></li>
<li><p><strong>input_path</strong> (<em>str</em>) – Name of input file for Serpent2 rerunning.</p></li>
<li><p><strong>iter_matfile</strong> (<em>str</em>) – Name of iterative, rewritable material file for Serpent2
rerunning. This file is modified during  the simulation.</p></li>
<li><p><strong>geo_file</strong> (<em>str</em><em> or </em><em>list</em><em>, </em><em>optional</em>) – Path to file that contains the reactor geometry.
List of <cite>str</cite> if reactivity control by
switching geometry is <cite>On</cite> or just <cite>str</cite> otherwise.</p></li>
<li><p><strong>npop</strong> (<em>int</em><em>, </em><em>optional</em>) – Size of neutron population per cycle for Monte Carlo.</p></li>
<li><p><strong>active_cycles</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of active cycles.</p></li>
<li><p><strong>inactive_cycles</strong> (<em>int</em><em>, </em><em>optional</em>) – Number of inactive cycles.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="saltproc.depcode.DepcodeSerpent.change_sim_par">
<span class="sig-name descname"><span class="pre">change_sim_par</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">template_data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/saltproc/depcode.html#DepcodeSerpent.change_sim_par"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#saltproc.depcode.DepcodeSerpent.change_sim_par" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds simulation parameters (neutron population, cycles) in the
Serpent2 template file and change them to the parameters from the
SaltProc input file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>template_data</strong> (<em>list</em>) – List of strings parsed from user’s Serpent2 template file.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>input_data</strong> – List of strings containing Serpent2 input file with new
simulation parameters.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="saltproc.depcode.DepcodeSerpent.create_iter_matfile">
<span class="sig-name descname"><span class="pre">create_iter_matfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">template_data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/saltproc/depcode.html#DepcodeSerpent.create_iter_matfile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#saltproc.depcode.DepcodeSerpent.create_iter_matfile" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds <code class="docutils literal notranslate"><span class="pre">include</span></code> line with path to material file, copies content of
this file to iteration material file, changes path in <code class="docutils literal notranslate"><span class="pre">include</span></code> line
to newly created iteration material file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>template_data</strong> (<em>list</em>) – List of strings parsed from user’s template file.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>input_data</strong> – List of strings containing modified user template file.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="saltproc.depcode.DepcodeSerpent.get_nuc_name">
<span class="sig-name descname"><span class="pre">get_nuc_name</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nuc_code</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/saltproc/depcode.html#DepcodeSerpent.get_nuc_name"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#saltproc.depcode.DepcodeSerpent.get_nuc_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns nuclide name in human-readable notation: chemical symbol
(one or two characters), dash, and the atomic weight. Lastly, if the
nuclide is in metastable state, the letter <cite>m</cite> is concatenated with
number of excited state. For example, <cite>Am-242m1</cite>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>nuc_code</strong> (<em>str</em>) – Name of nuclide in Serpent2 form. For instance, <cite>Am-242m</cite>.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>nuc_name</strong> (<em>str</em>) – Name of nuclide in human-readable notation (<cite>Am-242m1</cite>).</p></li>
<li><p><strong>nuc_zzaaam</strong> (<em>str</em>) – Name of nuclide in <cite>zzaaam</cite> form (<cite>952421</cite>).</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="saltproc.depcode.DepcodeSerpent.get_tra_or_dec">
<span class="sig-name descname"><span class="pre">get_tra_or_dec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_file</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/saltproc/depcode.html#DepcodeSerpent.get_tra_or_dec"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#saltproc.depcode.DepcodeSerpent.get_tra_or_dec" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the isotopes map to transform isotope <cite>zzaaam</cite> code to
Serpent2. Uses Serpent2 <cite>*.out</cite> file with list of all isotopes in
simulation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>input_file</strong> (<em>str</em>) – Serpent2 input file name and path.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p><strong>isotope_map</strong> – Contains mapping for isotopes names from <cite>zzaaam</cite> to Serpent2 name
imported from Serpent2 ouput file:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">key</span></code></dt><dd><p>The key is nuclide name in <cite>zzaaam</cite> format. For example,
<cite>922350</cite> or <cite>982510</cite>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">value</span></code></dt><dd><p>Serpent2-oriented name. For instance, 92235.09c for transport
isotope or 982510 for decay only isotope).</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict of str to str</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="saltproc.depcode.DepcodeSerpent.insert_path_to_geometry">
<span class="sig-name descname"><span class="pre">insert_path_to_geometry</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">template_data</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/saltproc/depcode.html#DepcodeSerpent.insert_path_to_geometry"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#saltproc.depcode.DepcodeSerpent.insert_path_to_geometry" title="Permalink to this definition">¶</a></dt>
<dd><p>Inserts <code class="docutils literal notranslate"><span class="pre">include</span> <span class="pre">&lt;first_geometry_file&gt;</span></code> line on the 6th line of
Serpent2 input file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>template_data</strong> (<em>list</em>) – List of strings parsed from user’s template file.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>template_data</strong> – List of strings containing modified path to geometry
in user’s template file.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="saltproc.depcode.DepcodeSerpent.read_dep_comp">
<span class="sig-name descname"><span class="pre">read_dep_comp</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">read_at_end</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/saltproc/depcode.html#DepcodeSerpent.read_dep_comp"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#saltproc.depcode.DepcodeSerpent.read_dep_comp" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads the Serpent2 <cite>*_dep.m</cite> file and returns a dictionary with
a <cite>Materialflow</cite> object for each burnable material.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_file</strong> (<em>str</em>) – Path to Serpent2 input file.</p></li>
<li><p><strong>read_at_end</strong> (<em>bool</em><em>, </em><em>optional</em>) – Controls at which moment in the depletion step to read the data.
If <cite>True</cite>, the function reads data at the end of the
depletion step. Otherwise, the function reads data at the
beginning of the depletion step.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p><strong>mats</strong> – Dictionary that contains <cite>Materialflow</cite> objects.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">key</span></code></dt><dd><p>Name of burnable material.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">value</span></code></dt><dd><p><cite>Materialflow</cite> object holding composition and properties.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>dict of str to Materialflow</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="saltproc.depcode.DepcodeSerpent.read_depcode_info">
<span class="sig-name descname"><span class="pre">read_depcode_info</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/saltproc/depcode.html#DepcodeSerpent.read_depcode_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#saltproc.depcode.DepcodeSerpent.read_depcode_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses initial simulation info data from Serpent2 output and stores
it in the <cite>DepcodeSerpent</cite> object’s <code class="docutils literal notranslate"><span class="pre">sim_info</span></code> attributes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="saltproc.depcode.DepcodeSerpent.read_depcode_step_param">
<span class="sig-name descname"><span class="pre">read_depcode_step_param</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/saltproc/depcode.html#DepcodeSerpent.read_depcode_step_param"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#saltproc.depcode.DepcodeSerpent.read_depcode_step_param" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses data from Serpent2 output for each step and stores it in
<cite>DepcodeSerpent</cite> object’s <code class="docutils literal notranslate"><span class="pre">param</span></code> attributes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="saltproc.depcode.DepcodeSerpent.read_depcode_template">
<span class="sig-name descname"><span class="pre">read_depcode_template</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">template_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/saltproc/depcode.html#DepcodeSerpent.read_depcode_template"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#saltproc.depcode.DepcodeSerpent.read_depcode_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads prepared Serpent2 template (input)  file for use in
other class functions that prepare the input file for multiple runs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>template_path</strong> (<em>str</em>) – Path to user template file for depletion code.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>tempalate_data</strong> – List of strings containing user template file.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="saltproc.depcode.DepcodeSerpent.replace_burnup_parameters">
<span class="sig-name descname"><span class="pre">replace_burnup_parameters</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">template_data</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reactor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_depstep_idx</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/saltproc/depcode.html#DepcodeSerpent.replace_burnup_parameters"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#saltproc.depcode.DepcodeSerpent.replace_burnup_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds or replaces the <code class="docutils literal notranslate"><span class="pre">set</span> <span class="pre">power</span> <span class="pre">P</span> <span class="pre">dep</span> <span class="pre">daystep</span> <span class="pre">DEPSTEP</span></code> line in
the Serpent2 input file. This line defines depletion history and power
levels with respect to the depletion step in the single run and
activates depletion calculation mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>template_data</strong> (<em>list</em>) – List of strings parsed from user template file.</p></li>
<li><p><strong>reactor</strong> (<a class="reference internal" href="saltproc.reactor.html#saltproc.reactor.Reactor" title="saltproc.reactor.Reactor"><em>Reactor</em></a>) – Contains information about power load curve and cumulative
depletion time for the integration test.</p></li>
<li><p><strong>current_depstep_idx</strong> (<em>int</em>) – Current depletion step.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>template_data</strong> – List of strings containing modified in this function template file.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>list</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="saltproc.depcode.DepcodeSerpent.run_depcode">
<span class="sig-name descname"><span class="pre">run_depcode</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cores</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nodes</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/saltproc/depcode.html#DepcodeSerpent.run_depcode"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#saltproc.depcode.DepcodeSerpent.run_depcode" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs Serpent2 as a subprocess with the given parameters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cores</strong> (<em>int</em>) – Number of cores to use for Serpent2 run (<cite>-omp</cite> flag in Serpent2).</p></li>
<li><p><strong>nodes</strong> (<em>int</em>) – Number of nodes to use for Serpent2 run (<cite>-mpi</cite> flag in Serpent2).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="saltproc.depcode.DepcodeSerpent.sss_meta_zzz">
<span class="sig-name descname"><span class="pre">sss_meta_zzz</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">nuc_code</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/saltproc/depcode.html#DepcodeSerpent.sss_meta_zzz"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#saltproc.depcode.DepcodeSerpent.sss_meta_zzz" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks Serpent2-specific meta stable-flag for zzaaam. For instance,
47310 instead of 471101 for <cite>Ag-110m1</cite>. Metastable isotopes represented
with <cite>aaa</cite> started with <code class="docutils literal notranslate"><span class="pre">3</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>nuc_code</strong> (<em>str</em>) – Name of nuclide in Serpent2 form. For instance, <cite>47310</cite>.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>nuc_zzaam</strong> – Name of nuclide in <cite>zzaaam</cite> form (<cite>471101</cite>).</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="saltproc.depcode.DepcodeSerpent.write_depcode_input">
<span class="sig-name descname"><span class="pre">write_depcode_input</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">temp_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inp_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reactor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dep_step</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">restart</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/saltproc/depcode.html#DepcodeSerpent.write_depcode_input"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#saltproc.depcode.DepcodeSerpent.write_depcode_input" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes prepared data into the depletion code input file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>template_file</strong> (<em>str</em>) – Path to Serpent2 template file.</p></li>
<li><p><strong>input_file</strong> (<em>str</em>) – Path to input file for Serpent2 rerunning.</p></li>
<li><p><strong>reactor</strong> (<a class="reference internal" href="saltproc.reactor.html#saltproc.reactor.Reactor" title="saltproc.reactor.Reactor"><em>Reactor</em></a>) – Contains information about power load curve and cumulative
depletion time for the integration test.</p></li>
<li><p><strong>dep_step</strong> (<em>int</em>) – Current depletion time step.</p></li>
<li><p><strong>restart</strong> (<em>bool</em>) – Is the current simulation restarted?</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="saltproc.depcode.DepcodeSerpent.write_mat_file">
<span class="sig-name descname"><span class="pre">write_mat_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dep_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mat_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dep_end_time</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/saltproc/depcode.html#DepcodeSerpent.write_mat_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#saltproc.depcode.DepcodeSerpent.write_mat_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes the iteration input file containing the burnable materials
composition used in Serpent2 runs and updated after each depletion
step.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dep_dict</strong> (<em>dict of str to Materialflow</em>) – <p>Dictionary that contains <cite>Materialflow</cite> objects.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">key</span></code></dt><dd><p>Name of burnable material.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">value</span></code></dt><dd><p><cite>Materialflow</cite> object holding composition and properties.</p>
</dd>
</dl>
</p></li>
<li><p><strong>mat_file</strong> (<em>str</em>) – Path to file containing burnable materials composition.</p></li>
<li><p><strong>dep_end_time</strong> (<em>float</em>) – Current time at the end of the depletion step (d).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: v0.3.0
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    <dl>
      <dt>Tags</dt>
      <dd><a href="saltproc.depcode.html">v0.3.0</a></dd>
    </dl>
    <dl>
      <dt>Branches</dt>
      <dd><a href="../../master/index.html">master</a></dd>
    </dl>
  </div>
</div><script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>